<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="css/style.css">
<title>家族関係図メーカー｜無料で家系図を作成</title>
<link rel="icon" href="/images/favicon-fl.ico" type="image/x-icon">
<link rel="apple-touch-icon" href="/images/apple-touch-icon-fl.png">
<meta name="description" content="家族関係図メーカーは、簡単に自分や家族の家系図を作成できる無料ツールです。親、配偶者、子供などを入力して関係図を生成できます。">
<meta name="keywords" content="家族関係図, 家系図, 無料作成, 関係図メーカー, genealogy, family tree">
<meta property="og:title" content="家族関係図メーカー｜無料で家系図作成">
<meta property="og:description" content="自分や家族の家系図を簡単に作れる無料ツール。親、配偶者、子供を入力して関係図を生成。">
<meta property="og:type" content="website">
<meta property="og:url" content="https://family-link-up.com">
<meta property="og:image" content="https://family-link-up.com/images/og-image.png">

<!-- Google AdSense -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3016118096844603"
   crossorigin="anonymous"></script>
</head>
<body>

<!-- 左サイド広告 -->
<aside>
<ins class="adsbygoogle"
     style="display:inline-block;width:184px;height:750px"
     data-ad-client="ca-pub-3016118096844603"
     data-ad-slot="2246349060"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</aside>

<!-- メインコンテンツ -->
<main>
  <nav class="navbar">
    <a href="index.html">家族関係図メーカー</a>
    <a href="howto.html">使い方</a>
    <a href="contact.html">お問い合わせ</a>
    <a href="privacy.html">プライバシーポリシー</a>
    <a href="blog.html">記事一覧</a>
  </nav>

  <h1>家族関係図メーカー</h1>

  <fieldset>
    <legend>自分</legend>
    続柄: <input type="text" id="meName" value="本人" />
    性別: 
    <select id="meGender">
      <option value="male">男性</option>
      <option value="female">女性</option>
    </select>
  </fieldset>

  <fieldset>
    <legend>結婚相手</legend>
    続柄: <input type="text" id="spouseName" value="妻" />
    性別: 
    <select id="spouseGender">
      <option value="male">男性</option>
      <option value="female" selected>女性</option>
    </select>
  </fieldset>

  <fieldset>
    <legend>親</legend>
    <div id="parentInputs"></div>
    <button type="button" onclick="addMember('parent')">＋親追加</button>
  </fieldset>

  <fieldset>
    <legend>配偶者の親</legend>
    <div id="spouseParentInputs"></div>
    <button type="button" onclick="addMember('spouseParent')">＋配偶者の親追加</button>
  </fieldset>

  <fieldset>
    <legend>子</legend>
    <div id="childInputs"></div>
    <button type="button" onclick="addMember('child')">＋子追加</button>
  </fieldset>

  <div>
    <button id="generateBtn" onclick="drawTree()">関係図を生成</button>
    <button id="printBtn" onclick="window.print()">印刷する</button>
  </div>

  <svg id="familyTree"></svg>
</main>

<!-- 右サイド広告 -->
<aside>
<ins class="adsbygoogle"
     style="display:inline-block;width:184px;height:750px"
     data-ad-client="ca-pub-3016118096844603"
     data-ad-slot="4164374890"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</aside>

<script>
function drawNode(svg, x, y, name, gender) {
  if (gender === 'male') {
    svg.innerHTML += `<rect x="${x-40}" y="${y-20}" width="80" height="40" fill="#add8e6" stroke="black"/>`;
  } else {
    svg.innerHTML += `<circle cx="${x}" cy="${y}" r="25" fill="#f4cccc" stroke="black"/>`;
  }
  // テキスト中央寄せ
  svg.innerHTML += `<text x="${x}" y="${y}" text-anchor="middle" dominant-baseline="middle" class="node-text">${name}</text>`;
}

function drawTree() {
  const svg = document.getElementById('familyTree');
  svg.setAttribute("viewBox", "0 0 1000 800");
  svg.setAttribute("width", "100%");
  svg.setAttribute("height", "600");

  svg.innerHTML = '';

  const meName = document.getElementById('meName').value;
  const meGender = document.getElementById('meGender').value;

  const spouseName = document.getElementById('spouseName').value;
  const spouseGender = document.getElementById('spouseGender').value;

  const parents = Array.from(document.querySelectorAll('.parent-name')).map((input, i) => ({
    name: input.value,
    gender: document.querySelectorAll('.parent-gender')[i].value
  }));
  const children = Array.from(document.querySelectorAll('.child-name')).map((input, i) => ({
    name: input.value,
    gender: document.querySelectorAll('.child-gender')[i].value
  }));
  const spouseParents = Array.from(document.querySelectorAll('.spouseParent-name')).map((input, i) => ({
    name: input.value,
    gender: document.querySelectorAll('.spouseParent-gender')[i].value
  }));

  const centerX = 500; // SVG中央を基準
  const centerY = 400;
  const spouseX = centerX + 200;

  // 自分と配偶者
  drawNode(svg, centerX, centerY, meName, meGender);
  drawNode(svg, spouseX, centerY, spouseName, spouseGender);

  // 結婚線
  svg.innerHTML += `<line x1="${centerX+40}" y1="${centerY}" x2="${spouseX-40}" y2="${centerY}" stroke="black"/>`;

  // 親（自分側）
  parents.forEach((p, i) => {
    const px = centerX - (parents.length - 1) * 120 / 2 + i * 120;
    const py = centerY - 200;
    drawNode(svg, px, py, p.name, p.gender);
    svg.innerHTML += `<line x1="${centerX}" y1="${centerY-20}" x2="${px}" y2="${py+20}" stroke="black"/>`;
  });

  // 配偶者の親
  spouseParents.forEach((p, i) => {
    const px = spouseX - (spouseParents.length - 1) * 120 / 2 + i * 120;
    const py = centerY - 200;
    drawNode(svg, px, py, p.name, p.gender);
    svg.innerHTML += `<line x1="${spouseX}" y1="${centerY-20}" x2="${px}" y2="${py+20}" stroke="black"/>`;
  });

  // 子供
  const midX = (centerX + spouseX) / 2;
  children.forEach((c, i) => {
    const cx = midX - (children.length - 1) * 120 / 2 + i * 120;
    const cy = centerY + 200;
    drawNode(svg, cx, cy, c.name, c.gender);
    svg.innerHTML += `<line x1="${midX}" y1="${centerY+20}" x2="${cx}" y2="${cy-30}" stroke="black"/>`;
  });
}

function addMember(type) {
  const container = document.getElementById(type + 'Inputs');
  const idx = container.children.length + 1;
  const div = document.createElement('div');
  div.innerHTML = `
    続柄: <input type="text" class="${type}-name" value="${type}${idx}" />
    性別: <select class="${type}-gender">
      <option value="male">男性</option>
      <option value="female">女性</option>
    </select>
  `;
  container.appendChild(div);
}
</script>

</body>
</html>
